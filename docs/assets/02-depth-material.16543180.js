import{i as S,G as P,S as E,P as y,a7 as z,W as G,C as B,A as W,b as j,V as k,B as H,g as A}from"./stats.module.a3b3754b.js";import{O as D}from"./OrbitControls.3858a42c.js";import{d as I,g as C,h as L,c as R,f as v,o as V}from"./index.ea266fd6.js";const O={class:"viewCon"},Z=I({__name:"02-depth-material",setup(T){const{random:c,PI:U,floor:q,ceil:F,min:N,max:$,sin:J,cos:K}=Math,f=C(),p=C();let r=window.innerWidth,i=window.innerHeight,u,l,o,t,s,b=new S,m=[];L(()=>{_(),x(),h()});const n={rotateSpeed:.01,addCube:function(){const e=c()*3+3,a=new H(e,e,e),d=new A(a,b);d.position.x=20-c()*40,d.position.y=20-c()*40,d.position.z=100-c()*100,m.push(d),o.add(d)},removeCube:function(){const e=m.pop();e&&o.remove(e)}},w={near:1,far:130};function x(){let e=new P({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",p.value.appendChild(e.domElement);for(let a=0;a<10;a++)n.addCube();e.add(n,"rotateSpeed",0,1,.01),e.add(n,"addCube").listen(),e.add(n,"removeCube").listen(),e.add(w,"near",0,50,1).onChange(a=>{t.near=a,t.updateProjectionMatrix()}),e.add(w,"far",50,200,1).onChange(a=>{t.far=a,t.updateProjectionMatrix()})}function M(){m.forEach(e=>{e.rotation.x+=n.rotateSpeed,e.rotation.y+=n.rotateSpeed,e.rotation.z+=n.rotateSpeed})}function _(){o=new E,t=new y(75,r/i,10,130),o.overrideMaterial=new z,s=new G({canvas:f.value,antialias:!0}),s.setClearColor(new B(0)),s.setSize(r,i),window.addEventListener("resize",g),o.add(new W(1e3)),u=j(),p.value.append(u.dom),l=new D(t,s.domElement),l.target=new k(0,0,0),l.object.position.set(0,3,100),l.update()}function h(){requestAnimationFrame(h),u.update(),M(),s.render(o,t)}function g(){r=window.innerWidth,i=window.innerHeight,t.aspect=r/i,t.updateProjectionMatrix(),s.setSize(r,i)}return(e,a)=>(V(),R("div",O,[v("div",{class:"canvasCon",ref_key:"canvasCon",ref:p},[v("canvas",{class:"canvas",ref_key:"canvasDom",ref:f},null,512)],512)]))}});export{Z as default};
