import{G as W,k as z,e as A,f as H,d as V,Y as B,ar as I,S as R,C as j,P as D,W as O,A as T,a as U,b as q,O as F,V as Y}from"./OrbitControls.9b659d00.js";import{c as $}from"./three.5766a1f7.js";import{d as J,g as b,h as K,c as Q,f as x,o as X}from"./index.28f061d6.js";import"./SceneUtils.36f209ee.js";const Z={class:"viewCon"},pe=J({__name:"02-advanced-3d-geometries-lathe-2",setup(ee){const{random:te,PI:g,floor:ne,ceil:ae,min:oe,max:se,sin:ie,cos:re}=Math,C=b(),f=b();let h=window.innerWidth,d=window.innerHeight,w,u,s,l,p,i,r=[],c;K(()=>{P(),k(),G(),S()});const o={height:5,pointNum:30,segments:12,phiStart:0,phiLength:g*2};function G(){var t;let e=new W({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(t=f.value)==null||t.appendChild(e.domElement),e.add(o,"height",1,20,1).onChange(()=>{M(),m()}),e.add(o,"pointNum",1,50,1).onChange(()=>{M(),m()}),e.add(o,"segments",1,20,1).onChange(n=>m()),e.add(o,"phiStart",0,g*2,.01).onChange(()=>m()),e.add(o,"phiLength",0,g*2,.01).onChange(()=>m())}let y=0;function E(){i.rotation.x=y+=.005,i.rotation.y=y+=.005}function k(){i=new z,s.add(i),v()().forEach(n=>{_(n)});const t=L();c=$(t),i.add(c)}function _(e){const t=new A(.4),n=new H({color:16711680}),a=new V(t,n);a.position.set(e.x,e.y,0),r.push(a),i.add(a)}function v(){let e=[];return function(){e.length=0;const{height:t,pointNum:n}=o;for(let a=0;a<n;a++)e.push(new B((Math.sin(a*.2)+Math.cos(a*.3))*t+12,a-n+n/2));return e}}function L(){const e=v()(),{segments:t,phiStart:n,phiLength:a}=o;return new I(e,t,n,a)}function M(){let e=v()();e.forEach((t,n)=>{n<r.length?(r[n].position.set(t.x,t.y,0),r[n].visible=!0):_(t)});for(let t=e.length,n=r.length;t<n;t++)r[t].visible=!1}function m(){let e=L();c.children[0].geometry.dispose(),c.children[1].geometry.dispose(),c.children[0].geometry=e,c.children[1].geometry=e}function P(){s=new R,s.background=new j(16777215),l=new D(75,h/d,1,1e3),p=new O({canvas:C.value,antialias:!0}),p.setSize(h,d),window.addEventListener("resize",N),s.add(new T(1e3)),s.add(new U(16777215)),w=q(),f.value.append(w.dom),u=new F(l,p.domElement),u.target=new Y(0,0,0),u.object.position.set(0,30,50),u.update()}function S(){requestAnimationFrame(S),w.update(),E(),p.render(s,l)}function N(){h=window.innerWidth,d=window.innerHeight,l.aspect=h/d,l.updateProjectionMatrix(),p.setSize(h,d)}return(e,t)=>(X(),Q("div",Z,[x("div",{class:"canvasCon",ref_key:"canvasCon",ref:f},[x("canvas",{class:"canvas",ref_key:"canvasDom",ref:C},null,512)],512)]))}});export{pe as default};
