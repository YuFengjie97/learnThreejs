import{G as P,ak as S,a9 as z,g as A,at as R,a1 as T,au as W,aF as j,S as B,C as H,P as K,W as O,A as q,a as L,b as U,V}from"./stats.module.c456474f.js";import{O as D}from"./OrbitControls.ff4b382f.js";import{d as F,g as k,h as I,c as N,f as _,o as $}from"./index.b9f501be.js";const J={class:"viewCon"},ee=F({__name:"10-create-particle-system-from-model",setup(Q){const g=k(),m=k();let r=window.innerWidth,d=window.innerHeight,w,h,a,l,c,p,u,s,C;I(()=>{x(),E(),y(),v()});const f={showKnot:!0,showCloud:!1},n={radius:50,tube:2,tubularSegments:156,radialSegments:12,p:5,q:4};function x(){var o;let e=new P({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(o=m.value)==null||o.appendChild(e.domElement),e.add(n,"radius",10,100,1).onChange(()=>i()),e.add(n,"tube",.4,10,.1).onChange(()=>i()),e.add(n,"tubularSegments",10,200,1).onChange(()=>i()),e.add(n,"radialSegments",10,20,1).onChange(()=>i()),e.add(n,"p",1,30,1).onChange(()=>i()),e.add(n,"q",1,30,1).onChange(()=>i()),e.add(f,"showKnot").onChange(t=>u.visible=t),e.add(f,"showCloud").onChange(t=>s.visible=t)}function y(){const e=new S(...Object.values(n));p=new z,u=new A(e,p),a.add(u),C=new R({color:1048575,size:2,transparent:!0,blending:T,depthTest:!0,map:M()}),s=new W(e,C),s.visible=!1,a.add(s)}function i(){const e=new S(...Object.values(n));u.geometry.dispose(),u.geometry=e,s.geometry.dispose(),s.geometry=e}function M(){const e=document.createElement("canvas");e.width=16,e.height=16;const o=e.getContext("2d"),t=o.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(.2,"rgba(0,255,255,1)"),t.addColorStop(.4,"rgba(0,0,64,1)"),t.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=t,o.fillRect(0,0,e.width,e.height);const b=new j(e);return b.needsUpdate=!0,b}function E(){a=new B,a.background=new H(4473924),l=new K(75,r/d,1,1e3),c=new O({canvas:g.value,antialias:!0}),c.setSize(r,d),window.addEventListener("resize",G),a.add(new q(1e3)),a.add(new L(4210752)),w=U(),m.value.append(w.dom),h=new D(l,c.domElement),h.target=new V(0,0,0),h.object.position.set(100,100,100),h.update()}function v(){requestAnimationFrame(v),w.update(),c.render(a,l)}function G(){r=window.innerWidth,d=window.innerHeight,l.aspect=r/d,l.updateProjectionMatrix(),c.setSize(r,d)}return(e,o)=>($(),N("div",J,[_("div",{class:"canvasCon",ref_key:"canvasCon",ref:m},[_("canvas",{class:"canvas",ref_key:"canvasDom",ref:g},null,512)],512)]))}});export{ee as default};
