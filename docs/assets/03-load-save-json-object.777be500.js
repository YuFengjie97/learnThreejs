import{aK as O,G as x,ak as h,f as E,g as G,S as J,C as M,P as L,W as P,A as W,a as z,b as A,V as B}from"./stats.module.c456474f.js";import{O as H}from"./OrbitControls.ff4b382f.js";import{d as I,g as v,h as N,c as q,f as C,o as K}from"./index.b9f501be.js";const R={class:"viewCon"},F=I({__name:"03-load-save-json-object",setup(T){const w=v(),m=v();let i=window.innerWidth,r=window.innerHeight,p,u,n,d,c,a,l;N(()=>{k(),j(),_(),g()});const b=new O,t={radius:50,tube:6,tubularSegments:156,radialSegments:12,p:5,q:4};localStorage.clear();const f={save:function(){const e=a.toJSON();localStorage.setItem("knotJson",JSON.stringify(e))},load:function(){l&&n.remove(l);const e=localStorage.getItem("knotJson");if(e){const o=JSON.parse(e);l=b.parse(o),l.position.x=-100,n.add(l)}}};function k(){var o;let e=new x({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(o=m.value)==null||o.appendChild(e.domElement),e.add(t,"radius",10,100,1).onChange(()=>s()),e.add(t,"tube",.4,10,.1).onChange(()=>s()),e.add(t,"tubularSegments",10,200,1).onChange(()=>s()),e.add(t,"radialSegments",10,20,1).onChange(()=>s()),e.add(t,"p",1,30,1).onChange(()=>s()),e.add(t,"q",1,30,1).onChange(()=>s()),e.add(f,"save").listen(),e.add(f,"load").listen()}function S(){a.rotation.y+=.01}function _(){const e=new h(...Object.values(t)),o=new E({wireframe:!0});a=new G(e,o),a.position.x=100,n.add(a)}function s(){const e=new h(...Object.values(t));a.geometry.dispose(),a.geometry=e}function j(){n=new J,n.background=new M(4473924),d=new L(75,i/r,1,1e3),c=new P({canvas:w.value,antialias:!0}),c.setSize(i,r),window.addEventListener("resize",y),n.add(new W(1e3)),n.add(new z(4210752)),p=A(),m.value.append(p.dom),u=new H(d,c.domElement),u.target=new B(0,0,0),u.object.position.set(0,10,200),u.update()}function g(){requestAnimationFrame(g),p.update(),S(),c.render(n,d)}function y(){i=window.innerWidth,r=window.innerHeight,d.aspect=i/r,d.updateProjectionMatrix(),c.setSize(i,r)}return(e,o)=>(K(),q("div",R,[C("div",{class:"canvasCon",ref_key:"canvasCon",ref:m},[C("canvas",{class:"canvas",ref_key:"canvasDom",ref:w},null,512)],512)]))}});export{F as default};
