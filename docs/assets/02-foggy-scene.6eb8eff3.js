import{g as u,B as E,i as v,G as L,e as H,j as W,k,S as B,F as R,P as A,W as F,A as I,b as V,V as D}from"./stats.module.c456474f.js";import{O as T}from"./OrbitControls.ff4b382f.js";import{d as U,g as C,h as q,c as N,f as S,o as $}from"./index.b9f501be.js";const J={class:"viewCon"},ae=U({__name:"02-foggy-scene",setup(K){const{random:r,PI:O,floor:x,ceil:Q,min:X,max:Y,sin:Z,cos:ee}=Math,w=C(),h=C();let c=window.innerWidth,d=window.innerHeight,m,p,t,l,a,i;q(()=>{G(),M(),j(),o.numberOfObjects=t.children.length,_(),f()});const o={rotationSpeed:.02,numberOfObjects:0,removeCube(){const e=t.children,n=e[e.length-1];n instanceof u&&(t.remove(n),this.numberOfObjects--)},addCube(){const e=r()*3,n=new E(e,e,e),z=new v({color:r()*16777215}),s=new u(n,z);s.castShadow=!0,s.name="cube-"+t.children.length;const{width:b,height:g}=i.geometry.parameters;s.position.x=-b/2+r()*b,s.position.y=x(r()*3)+3,s.position.z=-g/2+r()*g,t.add(s),this.numberOfObjects++},outputObjects(){console.log(t.children)}};function _(){var n;let e=new L({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(n=h.value)==null||n.appendChild(e.domElement),e.add(o,"rotationSpeed",0,.5),e.add(o,"addCube"),e.add(o,"removeCube"),e.add(o,"outputObjects"),e.add(o,"numberOfObjects").listen()}function M(){const e=new H(60,20,1,1),n=new v({color:16777215});i=new u(e,n),i.receiveShadow=!0,i.rotation.x=-.5*O,i.position.set(0,0,0),t.add(i)}function j(){const e=new W(16777215);e.position.set(-20,20,0),e.castShadow=!0;const n=new k(e);t.add(n),t.add(e)}function y(){t.traverse(function(e){e instanceof u&&e!==i&&(e.rotation.x+=o.rotationSpeed,e.rotation.y+=o.rotationSpeed,e.rotation.z+=o.rotationSpeed)})}function f(){requestAnimationFrame(f),m.update(),y(),a.render(t,l)}function G(){t=new B,t.fog=new R(16777215,1,100),l=new A(45,c/d,1,1e3),a=new F({canvas:w.value,antialias:!0}),a.setClearColor(4473924,1),a.setSize(c,d),a.shadowMap.enabled=!0,a.setPixelRatio(window.devicePixelRatio),window.addEventListener("resize",P),t.add(new I(1e3)),m=V(),h.value.append(m.dom),p=new T(l,a.domElement),p.target=new D(0,0,0),p.object.position.set(-50,20,20),p.update()}function P(){c=window.innerWidth,d=window.innerHeight,l.aspect=c/d,l.updateProjectionMatrix(),a.setSize(c,d)}return(e,n)=>($(),N("div",J,[S("div",{class:"canvasCon",ref_key:"canvasCon",ref:h},[S("canvas",{class:"canvas",ref_key:"canvasDom",ref:w},null,512)],512)]))}});export{ae as default};
