import{n as M,G as H,S as N,C as O,P as R,W as V,A as j,a as L,b as I,V as U,az as q,f as S,D as F,g as $,h as J}from"./stats.module.1062c650.js";import{O as K}from"./OrbitControls.3104130d.js";import{g as Q,C as X}from"./three.8b0ac93f.js";import{c as Y}from"./SceneUtils.7c052e71.js";import{d as Z,g as E,h as ee,c as te,f as z,o as ne}from"./index.6c251f58.js";const ae={class:"viewCon"},le=Z({__name:"04-extrude-tube",setup(oe){const v=E(),f=E();let i=window.innerWidth,d=window.innerHeight,g,p,n,c,u,a,o=new M,h=[];ee(()=>{A(),W(),P(),x()});const l={tubularSegments:64,radius:1,radialSegments:8,closed:!1},s={rotateSpeed:.005,pointsNum:10,redraw:function(){_()}};function P(){var t;let e=new H({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(t=f.value)==null||t.appendChild(e.domElement),e.add(s,"rotateSpeed",0,.02,.005),e.add(s,"pointsNum",2,40,1).onChange(()=>_()),e.add(l,"tubularSegments",1,128,1).onChange(()=>m()),e.add(l,"radius",1,10,.1).onChange(()=>m()),e.add(l,"radialSegments",2,40,1).onChange(()=>m()),e.add(l,"closed").onChange(()=>m()),e.add(s,"redraw").listen()}let w=0;function T(){o.rotation.x=w+=s.rotateSpeed,a.rotation.x=w+=s.rotateSpeed,o.rotation.y=w+=s.rotateSpeed,a.rotation.y=w+=s.rotateSpeed}function C(){h.length=0;let e=-15,t=15;for(let r=0;r<s.pointsNum;r++){const b=Q(e,t);h.push(b)}}function y(){const{tubularSegments:e,radius:t,radialSegments:r,closed:b}=l,D=new X(h);return new q(D,e,t,r,b)}function k(e){const t=new S({color:623843,transparent:!0,opacity:.5,side:F}),r=new S({wireframe:!0});a=Y(e,[t,r]),n.add(a)}function G(){return h.forEach(e=>{const t=new $(new J(.3),new S({color:16711680}));t.position.set(e.x,e.y,e.z),o.add(t)}),o}function W(){n.add(o),C(),G(),k(y())}function _(){C(),n.remove(o),o=new M,n.add(o),G(),m()}function m(){const e=y();a.children[0].geometry.dispose(),a.children[1].geometry.dispose(),a.children[0].geometry=e,a.children[1].geometry=e}function A(){n=new N,n.background=new O(16777215),c=new R(75,i/d,1,1e3),u=new V({canvas:v.value,antialias:!0}),u.setSize(i,d),window.addEventListener("resize",B),n.add(new j(1e3)),n.add(new L(16777215)),g=I(),f.value.append(g.dom),p=new K(c,u.domElement),p.target=new U(0,0,0),p.object.position.set(0,30,50),p.update()}function x(){requestAnimationFrame(x),g.update(),T(),u.render(n,c)}function B(){i=window.innerWidth,d=window.innerHeight,c.aspect=i/d,c.updateProjectionMatrix(),u.setSize(i,d)}return(e,t)=>(ne(),te("div",ae,[z("div",{class:"canvasCon",ref_key:"canvasCon",ref:f},[z("canvas",{class:"canvas",ref_key:"canvasDom",ref:v},null,512)],512)]))}});export{le as default};
