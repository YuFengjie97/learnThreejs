import{m as E,G as M,at as k,K as A,ay as G,au as B,aF as W,S as H,C as I,P as F,W as L,A as R,a as U,b as V,V as j}from"./stats.module.c456474f.js";import{O as D}from"./OrbitControls.ff4b382f.js";import{d as O,g as C,h as q,c as K,f as g,o as N}from"./index.b9f501be.js";const $={class:"viewCon"},Z=O({__name:"05a-program-based-point-cloud-webgl",setup(J){const b=C(),f=C();let i=window.innerWidth,r=window.innerHeight,m,c,a,s,l,u;const p=new E,d=20,n=10,T=[];q(()=>{z(),_(),y(),h()});function z(){var e;let t=new M({autoPlace:!1,width:300});t.domElement.style.cssText="position: fixed; top: 0; right: 0;",(e=f.value)==null||e.appendChild(t.domElement)}function x(){u.rotation.x+=.01,u.rotation.y+=.01}function y(){const t=new k({size:2,transparent:!0,opacity:.5,map:P()});for(let o=0;o<d;o++)for(let v=0;v<d;v++)for(let w=0;w<d;w++)T.push(o*n,v*n,w*n);p.setAttribute("position",new A(T,3));const e=-.5*d*n;p.applyMatrix4(new G().makeTranslation(e,e,e)),u=new B(p,t),a.add(u)}function P(){const t=document.createElement("canvas");t.width=32,t.height=32;const e=t.getContext("2d");e.translate(-81,-84),e.fillStyle="orange",e.beginPath(),e.moveTo(83,116),e.lineTo(83,102),e.bezierCurveTo(83,94,89,88,97,88),e.bezierCurveTo(105,88,111,94,111,102),e.lineTo(111,116),e.lineTo(106.333,111.333),e.lineTo(101.666,116),e.lineTo(97,111.333),e.lineTo(92.333,116),e.lineTo(87.666,111.333),e.lineTo(83,116),e.fill(),e.fillStyle="white",e.beginPath(),e.moveTo(91,96),e.bezierCurveTo(88,96,87,99,87,101),e.bezierCurveTo(87,103,88,106,91,106),e.bezierCurveTo(94,106,95,103,95,101),e.bezierCurveTo(95,99,94,96,91,96),e.moveTo(103,96),e.bezierCurveTo(100,96,99,99,99,101),e.bezierCurveTo(99,103,100,106,103,106),e.bezierCurveTo(106,106,107,103,107,101),e.bezierCurveTo(107,99,106,96,103,96),e.fill(),e.fillStyle="blue",e.beginPath(),e.arc(101,102,2,0,Math.PI*2,!0),e.fill(),e.beginPath(),e.arc(89,102,2,0,Math.PI*2,!0),e.fill();const o=new W(t);return o.needsUpdate=!0,o}function _(){a=new H,a.background=new I(4473924),s=new F(75,i/r,1,1e3),l=new L({canvas:b.value,antialias:!0}),l.setSize(i,r),window.addEventListener("resize",S),a.add(new R(1e3)),a.add(new U(4210752)),m=V(),f.value.append(m.dom),c=new D(s,l.domElement),c.object.position.set(1,1,1),c.target=new j(n,n,n),c.update()}function h(){requestAnimationFrame(h),m.update(),x(),l.render(a,s)}function S(){i=window.innerWidth,r=window.innerHeight,s.aspect=i/r,s.updateProjectionMatrix(),l.setSize(i,r)}return(t,e)=>(N(),K("div",$,[g("div",{class:"canvasCon",ref_key:"canvasCon",ref:f},[g("canvas",{class:"canvas",ref_key:"canvasDom",ref:b},null,512)],512)]))}});export{Z as default};
