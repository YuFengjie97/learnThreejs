import{n as x,G as S,aD as _,aE as P,aF as y,S as E,C as k,P as G,W as M,A as W,a as A,b as H,V as I}from"./stats.module.1062c650.js";import{O as R}from"./OrbitControls.3104130d.js";import{g as V}from"./three.8b0ac93f.js";import{d as B,g as v,h as D,c as L,f,o as U}from"./index.6c251f58.js";import"./SceneUtils.7c052e71.js";const j={class:"viewCon"},K=B({__name:"05b-program-based-sprites-webgl",setup(F){const m=v(),d=v();let o=window.innerWidth,i=window.innerHeight,u,l,n,r,s,c=new x;const w=1e3;D(()=>{b(),g(),h(),p()});function b(){var e;let t=new S({autoPlace:!1,width:300});t.domElement.style.cssText="position: fixed; top: 0; right: 0;",(e=d.value)==null||e.appendChild(t.domElement)}function T(){c.rotation.x+=.005,c.rotation.y+=.005}function h(){const t=new _({map:C(),color:16777215});for(let e=0;e<w;e++){const a=new P(t);a.position.copy(V(-500,500)),a.scale.multiplyScalar(10),c.add(a)}n.add(c)}function C(){const t=document.createElement("canvas");t.width=32,t.height=32;const e=t.getContext("2d");e.translate(-81,-84),e.fillStyle="orange",e.beginPath(),e.moveTo(83,116),e.lineTo(83,102),e.bezierCurveTo(83,94,89,88,97,88),e.bezierCurveTo(105,88,111,94,111,102),e.lineTo(111,116),e.lineTo(106.333,111.333),e.lineTo(101.666,116),e.lineTo(97,111.333),e.lineTo(92.333,116),e.lineTo(87.666,111.333),e.lineTo(83,116),e.fill(),e.fillStyle="white",e.beginPath(),e.moveTo(91,96),e.bezierCurveTo(88,96,87,99,87,101),e.bezierCurveTo(87,103,88,106,91,106),e.bezierCurveTo(94,106,95,103,95,101),e.bezierCurveTo(95,99,94,96,91,96),e.moveTo(103,96),e.bezierCurveTo(100,96,99,99,99,101),e.bezierCurveTo(99,103,100,106,103,106),e.bezierCurveTo(106,106,107,103,107,101),e.bezierCurveTo(107,99,106,96,103,96),e.fill(),e.fillStyle="blue",e.beginPath(),e.arc(101,102,2,0,Math.PI*2,!0),e.fill(),e.beginPath(),e.arc(89,102,2,0,Math.PI*2,!0),e.fill();const a=new y(t);return a.needsUpdate=!0,a}function g(){n=new E,n.background=new k(4473924),r=new G(75,o/i,1,1e3),s=new M({canvas:m.value,antialias:!0}),s.setSize(o,i),window.addEventListener("resize",z),n.add(new W(1e3)),n.add(new A(4210752)),u=H(),d.value.append(u.dom),l=new R(r,s.domElement),l.object.position.set(1,1,1),l.target=new I(10,10,10),l.update()}function p(){requestAnimationFrame(p),u.update(),T(),s.render(n,r)}function z(){o=window.innerWidth,i=window.innerHeight,r.aspect=o/i,r.updateProjectionMatrix(),s.setSize(o,i)}return(t,e)=>(U(),L("div",j,[f("div",{class:"canvasCon",ref_key:"canvasCon",ref:d},[f("canvas",{class:"canvas",ref_key:"canvasDom",ref:m},null,512)],512)]))}});export{K as default};
