import{G as H,k as O,a9 as j,a5 as F,D as N,M as R,j as U,i as V,E as $,y as J,aa as K,ab as Q,ac as b,S as X,C as Y,P as Z,W as ee,A as te,b as ae,O as ne,V as se}from"./OrbitControls.9db38112.js";import{c as oe}from"./SceneUtils.fcab5cca.js";import{d as ie,g as _,h as re,c as ce,f as T,o as le}from"./index.314a26ca.js";const de={class:"viewCon"},Me=ie({__name:"03-basic-2d-geometries-shape",setup(ue){const{random:he,PI:B,floor:pe,ceil:me,min:we,max:fe,sin:ve,cos:Se}=Math,y=_(),v=_();let r=window.innerWidth,c=window.innerHeight,S,p,l,d,u,m,C,w;const f=new Float32Array(408);let o;re(()=>{q(),A(),G(),x()});const h={rotateSpeed:.01,showShape:!0,divisions:10};function G(){var a;let e=new H({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(a=v.value)==null||a.appendChild(e.domElement),e.add(h,"rotateSpeed",0,2,.01),e.add(h,"showShape").onChange(t=>{C.visible=t,w.visible=!t}),e.add(h,"divisions",1,20,1).onChange(t=>{P(m,t)})}let k=0;function z(){o.rotation.y=k+=h.rotateSpeed}function A(){o=new O,o.rotation.z=B,l.add(o),m=W(),C=I(),w=L(m)}let M=.1;function I(e){const a=new j(m),t=new F({side:N}),n=new R({wireframe:!0}),i=oe(a,[n,t]);return i.scale.multiplyScalar(M),g(i),o.add(i),i}function L(e){P(e,h.divisions);const a=new U().setAttribute("position",new V(f,2)),t=new $({color:16724787}),n=new J(a,t);return n.scale.multiplyScalar(M),g(n),o.add(n),n.visible=!1,n}function g(e){new K().setFromObject(e).getCenter(e.position),e.position.multiplyScalar(-1)}function P(e,a){let t=[];const{shape:n,holes:i}=e.extractPoints(a);t.push(...n),i.forEach(s=>{t.push(...s)}),t.forEach((s,E)=>{f[E*2]=s.x,f[E*2+1]=s.y});for(let s=t.length*2;s<408;s++)f[s]=0;w&&(w.geometry.attributes.position.needsUpdate=!0)}function W(){const e=new Q().moveTo(80,40).absarc(40,40,40,0,Math.PI*2,!1),a=new b().moveTo(35,20).absellipse(25,20,10,10,0,Math.PI*2,!0,0),t=new b().moveTo(65,20).absarc(55,20,10,0,Math.PI*2,!0),n=new b().moveTo(20,40).quadraticCurveTo(40,60,60,40).bezierCurveTo(70,45,70,50,60,60).quadraticCurveTo(40,80,20,60).quadraticCurveTo(5,50,20,40);return e.holes.push(a),e.holes.push(t),e.holes.push(n),e}function q(){l=new X,l.background=new Y(16777215),d=new Z(75,r/c,1,1e3),u=new ee({canvas:y.value,antialias:!0}),u.setSize(r,c),window.addEventListener("resize",D),l.add(new te(1e3)),S=ae(),v.value.append(S.dom),p=new ne(d,u.domElement),p.target=new se(0,0,0),p.object.position.set(0,3,20),p.update()}function x(){requestAnimationFrame(x),S.update(),z(),u.render(l,d)}function D(){r=window.innerWidth,c=window.innerHeight,d.aspect=r/c,d.updateProjectionMatrix(),u.setSize(r,c)}return(e,a)=>(le(),ce("div",de,[T("div",{class:"canvasCon",ref_key:"canvasCon",ref:v},[T("canvas",{class:"canvas",ref_key:"canvasDom",ref:y},null,512)],512)]))}});export{Me as default};
