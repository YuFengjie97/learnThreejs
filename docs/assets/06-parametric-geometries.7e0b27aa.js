import{m as L,V as x,K as W,G as O,ay as R,aa as T,D as q,q as F,r as U,S as K,C as N,P as $,W as J,A as Q,b as X}from"./stats.module.c456474f.js";import{O as Y}from"./OrbitControls.ff4b382f.js";import{c as Z}from"./SceneUtils.60b9f24d.js";import{d as ee,g as E,h as te,c as ae,f as V,o as ne}from"./index.b9f501be.js";class z extends L{constructor(m=(r,w,u)=>u.set(r,w,Math.cos(r)*Math.sin(w)),M=8,h=8){super(),this.type="ParametricGeometry",this.parameters={func:m,slices:M,stacks:h};const r=[],w=[],u=[],c=[],l=1e-5,p=new x,t=new x,n=new x,v=new x,y=new x,f=M+1;for(let s=0;s<=h;s++){const o=s/h;for(let g=0;g<=M;g++){const d=g/M;m(d,o,t),w.push(t.x,t.y,t.z),d-l>=0?(m(d-l,o,n),v.subVectors(t,n)):(m(d+l,o,n),v.subVectors(n,t)),o-l>=0?(m(d,o-l,n),y.subVectors(t,n)):(m(d,o+l,n),y.subVectors(n,t)),p.crossVectors(v,y).normalize(),u.push(p.x,p.y,p.z),c.push(d,o)}}for(let s=0;s<h;s++)for(let o=0;o<M;o++){const g=s*f+o,d=s*f+o+1,S=(s+1)*f+o+1,C=(s+1)*f+o;r.push(g,d,C),r.push(d,S,C)}this.setIndex(r),this.setAttribute("position",new W(w,3)),this.setAttribute("normal",new W(u,3)),this.setAttribute("uv",new W(c,2))}}const se={class:"viewCon"},le=ee({__name:"06-parametric-geometries",setup(k){const m=E(),M=E();let h=window.innerWidth,r=window.innerHeight,w,u,c,l,p,t,n,v;te(()=>{D(),S(),G(),o(),I()});const y={color:16777215},f={color:3381759,specular:178958335,shininess:40},s={type:"radialWave",rotateSpeed:.01};function o(){var i;let e=new O({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(i=M.value)==null||i.appendChild(e.domElement),e.add(s,"type",["radialWave","klein"]).onChange(a=>{c.remove(t),a==="radialWave"?t=C(new z(H,120,120)):a==="klein"&&(t=C(new z(A,120,120))),c.add(t)}),e.add(s,"rotateSpeed",0,.02,.005),e.addColor(y,"color").name("lightColor").onChange(a=>{n.color.setHex(a),v.update()}),e.addColor(f,"color").onChange(a=>{t.children[0].material.color.setHex(a)}),e.addColor(f,"specular").onChange(a=>{t.children[0].material.specular.setHex(a)}),e.add(f,"shininess",1,80,1).onChange(a=>{t.children[0].material.shininess=a})}let g=0;function d(){t.rotation.x=g+=s.rotateSpeed,t.rotation.y=g+=s.rotateSpeed}function S(){t=C(new z(H,120,120)),c.add(t)}function C(e){s.type==="radialWave"&&e.applyMatrix4(new R().makeTranslation(-25,0,-25));const i=new T({specular:178958335,color:3381759,shininess:40,side:q}),a=Z(e,[i]);return a.position.set(0,0,0),a}function A(e,i,a){e*=Math.PI,i*=2*Math.PI,e=e*2;var P,_,b;e<Math.PI?(P=3*Math.cos(e)*(1+Math.sin(e))+2*(1-Math.cos(e)/2)*Math.cos(e)*Math.cos(i),b=-8*Math.sin(e)-2*(1-Math.cos(e)/2)*Math.sin(e)*Math.cos(i)):(P=3*Math.cos(e)*(1+Math.sin(e))+2*(1-Math.cos(e)/2)*Math.cos(i+Math.PI),b=-8*Math.sin(e)),_=-2*(1-Math.cos(e)/2)*Math.sin(i),a.set(P,_,b)}function H(e,i,a){const _=Math.sin(e)*50,b=Math.sin(i/2)*2*50,B=(Math.sin(e*4*Math.PI)+Math.cos(i*2*Math.PI))*2.8;a.set(_,B,b)}function G(){n=new F(16777215),n.position.set(-30,30,-30),n.intensity=.7,n.target=t,v=new U(n,10),c.add(v),c.add(n)}function D(){c=new K,c.background=new N(16777215),l=new $(75,h/r,1,1e3),p=new J({canvas:m.value,antialias:!0}),p.setSize(h,r),window.addEventListener("resize",j),c.add(new Q(1e3)),w=X(),M.value.append(w.dom),u=new Y(l,p.domElement),u.target=new x(0,0,0),u.object.position.set(0,30,50),u.update()}function I(){requestAnimationFrame(I),w.update(),d(),p.render(c,l)}function j(){h=window.innerWidth,r=window.innerHeight,l.aspect=h/r,l.updateProjectionMatrix(),p.setSize(h,r)}return(e,i)=>(ne(),ae("div",se,[V("div",{class:"canvasCon",ref_key:"canvasCon",ref:M},[V("canvas",{class:"canvas",ref_key:"canvasDom",ref:m},null,512)],512)]))}});export{le as default};
