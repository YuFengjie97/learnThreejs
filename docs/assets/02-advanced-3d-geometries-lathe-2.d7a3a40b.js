import{G as W,n as z,h as A,i as H,g as V,d as B,av as I,S as R,C as j,P as D,W as O,A as T,a as U,b as q,V as F}from"./stats.module.c456474f.js";import{O as $}from"./OrbitControls.ff4b382f.js";import{c as J}from"./three.85ac78f3.js";import{d as K,g as b,h as Q,c as X,f as x,o as Y}from"./index.b9f501be.js";import"./SceneUtils.60b9f24d.js";const Z={class:"viewCon"},me=K({__name:"02-advanced-3d-geometries-lathe-2",setup(ee){const{random:te,PI:g,floor:ne,ceil:oe,min:ae,max:se,sin:ie,cos:re}=Math,C=b(),f=b();let c=window.innerWidth,d=window.innerHeight,w,u,s,l,p,i,r=[],h;Q(()=>{k(),P(),G(),S()});const a={height:5,pointNum:30,segments:12,phiStart:0,phiLength:g*2};function G(){var t;let e=new W({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(t=f.value)==null||t.appendChild(e.domElement),e.add(a,"height",1,20,1).onChange(()=>{M(),m()}),e.add(a,"pointNum",1,50,1).onChange(()=>{M(),m()}),e.add(a,"segments",1,20,1).onChange(n=>m()),e.add(a,"phiStart",0,g*2,.01).onChange(()=>m()),e.add(a,"phiLength",0,g*2,.01).onChange(()=>m())}let y=0;function E(){i.rotation.x=y+=.005,i.rotation.y=y+=.005}function P(){i=new z,s.add(i),v()().forEach(n=>{_(n)});const t=L();h=J(t),i.add(h)}function _(e){const t=new A(.4),n=new H({color:16711680}),o=new V(t,n);o.position.set(e.x,e.y,0),r.push(o),i.add(o)}function v(){let e=[];return function(){e.length=0;const{height:t,pointNum:n}=a;for(let o=0;o<n;o++)e.push(new B((Math.sin(o*.2)+Math.cos(o*.3))*t+12,o-n+n/2));return e}}function L(){const e=v()(),{segments:t,phiStart:n,phiLength:o}=a;return new I(e,t,n,o)}function M(){let e=v()();e.forEach((t,n)=>{n<r.length?(r[n].position.set(t.x,t.y,0),r[n].visible=!0):_(t)});for(let t=e.length,n=r.length;t<n;t++)r[t].visible=!1}function m(){let e=L();h.children[0].geometry.dispose(),h.children[1].geometry.dispose(),h.children[0].geometry=e,h.children[1].geometry=e}function k(){s=new R,s.background=new j(16777215),l=new D(75,c/d,1,1e3),p=new O({canvas:C.value,antialias:!0}),p.setSize(c,d),window.addEventListener("resize",N),s.add(new T(1e3)),s.add(new U(16777215)),w=q(),f.value.append(w.dom),u=new $(l,p.domElement),u.target=new F(0,0,0),u.object.position.set(0,30,50),u.update()}function S(){requestAnimationFrame(S),w.update(),E(),p.render(s,l)}function N(){c=window.innerWidth,d=window.innerHeight,l.aspect=c/d,l.updateProjectionMatrix(),p.setSize(c,d)}return(e,t)=>(Y(),X("div",Z,[x("div",{class:"canvasCon",ref_key:"canvasCon",ref:f},[x("canvas",{class:"canvas",ref_key:"canvasDom",ref:C},null,512)],512)]))}});export{me as default};
