import{G as U,C as _,e as N,i as S,D as $,g as C,B as J,h as E,a as K,j as Q,k as X,S as Y,P as Z,W as ee,A as te,b as ae,V as oe}from"./stats.module.1062c650.js";import{O as ne}from"./OrbitControls.3104130d.js";import{d as se,g as j,h as ie,c as re,f as k,o as de}from"./index.6c251f58.js";const ce={class:"viewCon"},Me=se({__name:"03-spot-light",setup(le){const{random:pe,PI:G,floor:he,ceil:we,min:ue,max:ge,sin:z,cos:B,sqrt:me}=Math,H=j(),M=j();let p=window.innerWidth,h=window.innerHeight,b,m,n,w,l,u,d,c,g,v,o,f;ie(()=>{W(),V(),D(),I(),P()});const i={ambientLightColor:16777215,disableSpotlight:!1,rotateSpeed:.02,jumpSpeed:.04},s={stopMoving:!1,showHelper:!0,castShadow:!0,target:"plane",color:623843,intensity:2,distance:200,decay:1};function W(){var r;let a=new U({autoPlace:!1,width:300});a.domElement.style.cssText="position: fixed; top: 0; right: 0;",(r=M.value)==null||r.appendChild(a.domElement),a.addColor(i,"ambientLightColor").onChange(e=>{v.color=new _(e)}),a.add(i,"rotateSpeed",0,1,.01),a.add(i,"jumpSpeed",0,1,.01);const t=a.addFolder("spotLight");t.open(),t.add(s,"stopMoving"),t.add(s,"showHelper").onChange(e=>{f.visible=e}),t.add(s,"castShadow").onChange(e=>{o.castShadow=e}),t.add(s,"target",["plane","cube","sphere"]).onChange(e=>{e==="plane"?o.target=u:e==="cube"?o.target=d:e==="sphere"&&(o.target=c)}),t.addColor(s,"color").onChange(e=>{o.color=new _(e)}),t.add(s,"intensity",0,4,.1).onChange(e=>{o.intensity=e}),t.add(s,"distance",0,400,1).onChange(e=>{o.distance=e}),t.add(s,"decay",0,2,.1).onChange(e=>{o.decay=e})}function A(a=30){let t=0;return function(){t+=i.rotateSpeed,t>=2*G&&(t=0);let r=z(t),e=B(t),L=a*r/(1+e*e),x=a*r*e/(1+e*e);return{x:L,y:x}}}function D(){const a=new N(60,40,1,1),t=new S({color:6516338,side:$});u=new C(a,t),u.rotation.x=-.5*G,u.receiveShadow=!0,n.add(u);const r=new J(4,4,4),e=new S({color:16711680,wireframe:!1});d=new C(r,e),d.position.set(-14,2,0),d.castShadow=!0,n.add(d);const L=new E(4),x=new S({color:7829503,wireframe:!1});c=new C(L,x),c.position.set(4,4,0),c.castShadow=!0,n.add(c);const F=new E(1),O=new S({color:16632686});g=new C(F,O),g.position.set(3,0,3),n.add(g)}function I(){v=new K(i.ambientLightColor),n.add(v);const{color:a,intensity:t,distance:r,decay:e}=s;o=new Q(a,t,r,e),o.castShadow=!0,f=new X(o),n.add(o),n.add(f)}let y=0,R=A();function T(){if(d.rotation.x+=i.rotateSpeed,d.rotation.y+=i.rotateSpeed,d.rotation.z+=i.rotateSpeed,y+=i.jumpSpeed,c.position.x=5+10*Math.cos(y),c.position.y=2+6*Math.abs(Math.sin(y)),!s.stopMoving){let{x:a,y:t}=R();g.position.set(a,4,t),o.position.copy(g.position),o.castShadow=s.castShadow,f.update()}}function P(){requestAnimationFrame(P),b.update(),T(),l.render(n,w)}function V(){n=new Y,n.background=new _(4473924),w=new Z(75,p/h,1,1e3),l=new ee({canvas:H.value,antialias:!0}),l.setSize(p,h),l.shadowMap.enabled=!0,window.addEventListener("resize",q),n.add(new te(1e3)),b=ae(),M.value.append(b.dom),m=new ne(w,l.domElement),m.target=new oe(0,0,0),m.object.position.set(-30,20,20),m.update()}function q(){p=window.innerWidth,h=window.innerHeight,w.aspect=p/h,w.updateProjectionMatrix(),l.setSize(p,h)}return(a,t)=>(de(),re("div",ce,[k("div",{class:"canvasCon",ref_key:"canvasCon",ref:M},[k("canvas",{class:"canvas",ref_key:"canvasDom",ref:H},null,512)],512)]))}});export{Me as default};
