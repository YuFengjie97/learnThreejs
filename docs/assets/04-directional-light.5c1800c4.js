import{G as U,C as G,e as N,i as S,D as $,g as M,B as J,h as E,a as K,q as Q,r as X,S as Y,P as Z,W as ee,A as te,b as ae,V as ne}from"./stats.module.c456474f.js";import{O as oe}from"./OrbitControls.ff4b382f.js";import{d as se,g as D,h as ie,c as re,f as j,o as de}from"./index.b9f501be.js";const le={class:"viewCon"},be=se({__name:"04-directional-light",setup(ce){const{random:pe,PI:L,floor:he,ceil:we,min:ue,max:me,sin:k,cos:z,sqrt:ge}=Math,H=D(),b=D();let p=window.innerWidth,h=window.innerHeight,C,g,o,w,c,u,r,l,m,v,n,f;ie(()=>{B(),T(),A(),q(),P()});const s={ambientLightColor:16777215,disableSpotlight:!1,rotateSpeed:.02,jumpSpeed:.04},i={stopMoving:!1,showHelper:!0,castShadow:!0,target:"plane",color:623843,intensity:2,distance:200,decay:1};function B(){var d;let a=new U({autoPlace:!1,width:300});a.domElement.style.cssText="position: fixed; top: 0; right: 0;",(d=b.value)==null||d.appendChild(a.domElement),a.addColor(s,"ambientLightColor").onChange(e=>{v.color=new G(e)}),a.add(s,"rotateSpeed",0,1,.01),a.add(s,"jumpSpeed",0,1,.01);const t=a.addFolder("light");t.open(),t.add(i,"stopMoving"),t.add(i,"showHelper").onChange(e=>{f.visible=e}),t.add(i,"castShadow").onChange(e=>{n.castShadow=e}),t.add(i,"target",["plane","cube","sphere"]).onChange(e=>{e==="plane"?n.target=u:e==="cube"?n.target=r:e==="sphere"&&(n.target=l)}),t.addColor(i,"color").onChange(e=>{n.color=new G(e)}),t.add(i,"intensity",0,4,.1).onChange(e=>{n.intensity=e})}function W(a=30){let t=0;return function(){t+=s.rotateSpeed,t>=2*L&&(t=0);let d=k(t),e=z(t),x=a*d/(1+e*e),_=a*d*e/(1+e*e);return{x,y:_}}}function A(){const a=new N(60,40,1,1),t=new S({color:6516338,side:$});u=new M(a,t),u.rotation.x=-.5*L,u.receiveShadow=!0,o.add(u);const d=new J(4,4,4),e=new S({color:16711680,wireframe:!1});r=new M(d,e),r.position.set(-14,2,0),r.castShadow=!0,o.add(r);const x=new E(4),_=new S({color:7829503,wireframe:!1});l=new M(x,_),l.position.set(4,4,0),l.castShadow=!0,o.add(l);const F=new E(1),O=new S({color:16632686});m=new M(F,O),m.position.set(3,0,3),o.add(m)}function q(){v=new K(s.ambientLightColor),o.add(v);const{color:a,intensity:t,distance:d,decay:e}=i;n=new Q(a,t),n.castShadow=!0,f=new X(n,20),o.add(n),o.add(f)}let y=0,I=W();function R(){if(r.rotation.x+=s.rotateSpeed,r.rotation.y+=s.rotateSpeed,r.rotation.z+=s.rotateSpeed,y+=s.jumpSpeed,l.position.x=5+10*Math.cos(y),l.position.y=2+6*Math.abs(Math.sin(y)),!i.stopMoving){let{x:a,y:t}=I();m.position.set(a,4,t),n.position.copy(m.position),n.castShadow=i.castShadow,f.update()}}function P(){requestAnimationFrame(P),C.update(),R(),c.render(o,w)}function T(){o=new Y,o.background=new G(4473924),w=new Z(75,p/h,1,1e3),c=new ee({canvas:H.value,antialias:!0}),c.setSize(p,h),c.shadowMap.enabled=!0,window.addEventListener("resize",V),o.add(new te(1e3)),C=ae(),b.value.append(C.dom),g=new oe(w,c.domElement),g.target=new ne(0,0,0),g.object.position.set(-30,20,20),g.update()}function V(){p=window.innerWidth,h=window.innerHeight,w.aspect=p/h,w.updateProjectionMatrix(),c.setSize(p,h)}return(a,t)=>(de(),re("div",le,[j("div",{class:"canvasCon",ref_key:"canvasCon",ref:b},[j("canvas",{class:"canvas",ref_key:"canvasDom",ref:H},null,512)],512)]))}});export{be as default};
