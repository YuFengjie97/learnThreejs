import{n as L,aK as W,G as D,e as H,f as g,a1 as N,B as J,h as R,a9 as V,D as T,S as x,C as U,P as q,W as F,A as K,a as $,b as Q,V as X}from"./stats.module.1062c650.js";import{O as Y}from"./OrbitControls.3104130d.js";import{c as y}from"./SceneUtils.7c052e71.js";import{d as Z,g as C,h as ee,c as ne,f as _,o as te}from"./index.6c251f58.js";const ae={class:"viewCon"},he=Z({__name:"04-load-save-json-scene",setup(oe){const{random:se,PI:G,floor:re,ceil:ie,min:ce,max:de,sin:le,cos:me}=Math,v=C(),p=C();let a=window.innerWidth,o=window.innerHeight,u,c,n,s,r;const d=new L;let l,m;ee(()=>{P(),z(),E(),S()});const M=new W,i={exportScene:function(){const e=JSON.stringify(n);localStorage.setItem("scene",e)},clearScene:function(){n=new x},importScene:function(){const e=localStorage.getItem("scene");e&&(n=M.parse(JSON.parse(e)))},grouping:!1,rotate:!1},j={pos:{x:10,y:0,z:0},scale:1},O={pos:{x:-10,y:0,z:0},scale:1};function P(){var t;let e=new D({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",(t=p.value)==null||t.appendChild(e.domElement),e.add(i,"exportScene").listen(),e.add(i,"clearScene").listen(),e.add(i,"importScene").listen()}let f=.05;function B(){i.rotate&&(i.grouping?d.rotation.y+=f:(l.rotation.y+=f,m.rotation.y+=f))}function E(){n.add(d);const e=new H(500,500,128,128),t=new g({color:47252,transparent:!0,blending:N}),w=new g({wireframe:!0}),h=y(e,[t,w]);h.rotation.x=-G/2,n.add(h);const A=new J(10,10,10,10,10,10);l=b(A),l.position.set(...Object.values(j.pos));const I=new R(5,10,10);m=b(I),m.position.set(...Object.values(O.pos)),d.add(l),d.add(m)}function b(e){const t=new V({side:T}),w=new g({wireframe:!0});return y(e,[t,w])}function z(){n=new x,n.background=new U(4473924),s=new q(75,a/o,1,1e3),r=new F({canvas:v.value,antialias:!0}),r.setSize(a,o),window.addEventListener("resize",k),n.add(new K(1e3)),n.add(new $(4210752)),u=Q(),p.value.append(u.dom),c=new Y(s,r.domElement),c.target=new X(0,0,0),c.object.position.set(0,10,40),c.update()}function S(){requestAnimationFrame(S),u.update(),B(),r.render(n,s)}function k(){a=window.innerWidth,o=window.innerHeight,s.aspect=a/o,s.updateProjectionMatrix(),r.setSize(a,o)}return(e,t)=>(te(),ne("div",ae,[_("div",{class:"canvasCon",ref_key:"canvasCon",ref:p},[_("canvas",{class:"canvas",ref_key:"canvasDom",ref:v},null,512)],512)]))}});export{he as default};
