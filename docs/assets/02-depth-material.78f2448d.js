import{f as g,G as P,S as E,P as y,a3 as z,W as G,C as B,A as W,b as j,O as k,V as H,B as A,d as D}from"./OrbitControls.9b659d00.js";import{d as I,g as C,h as L,c as R,f as v,o as V}from"./index.28f061d6.js";const O={class:"viewCon"},Y=I({__name:"02-depth-material",setup(T){const{random:c,PI:U,floor:q,ceil:F,min:N,max:$,sin:J,cos:K}=Math,f=C(),u=C();let r=window.innerWidth,i=window.innerHeight,p,l,o,t,s,b=new g,m=[];L(()=>{_(),x(),h()});const n={rotateSpeed:.01,addCube:function(){const e=c()*3+3,a=new A(e,e,e),d=new D(a,b);d.position.x=20-c()*40,d.position.y=20-c()*40,d.position.z=100-c()*100,m.push(d),o.add(d)},removeCube:function(){const e=m.pop();e&&o.remove(e)}},w={near:1,far:130};function x(){let e=new P({autoPlace:!1,width:300});e.domElement.style.cssText="position: fixed; top: 0; right: 0;",u.value.appendChild(e.domElement);for(let a=0;a<10;a++)n.addCube();e.add(n,"rotateSpeed",0,1,.01),e.add(n,"addCube").listen(),e.add(n,"removeCube").listen(),e.add(w,"near",0,50,1).onChange(a=>{t.near=a,t.updateProjectionMatrix()}),e.add(w,"far",50,200,1).onChange(a=>{t.far=a,t.updateProjectionMatrix()})}function M(){m.forEach(e=>{e.rotation.x+=n.rotateSpeed,e.rotation.y+=n.rotateSpeed,e.rotation.z+=n.rotateSpeed})}function _(){o=new E,t=new y(75,r/i,10,130),o.overrideMaterial=new z,s=new G({canvas:f.value,antialias:!0}),s.setClearColor(new B(0)),s.setSize(r,i),window.addEventListener("resize",S),o.add(new W(1e3)),p=j(),u.value.append(p.dom),l=new k(t,s.domElement),l.target=new H(0,0,0),l.object.position.set(0,3,100),l.update()}function h(){requestAnimationFrame(h),p.update(),M(),s.render(o,t)}function S(){r=window.innerWidth,i=window.innerHeight,t.aspect=r/i,t.updateProjectionMatrix(),s.setSize(r,i)}return(e,a)=>(V(),R("div",O,[v("div",{class:"canvasCon",ref_key:"canvasCon",ref:u},[v("canvas",{class:"canvas",ref_key:"canvasDom",ref:f},null,512)],512)]))}});export{Y as default};
