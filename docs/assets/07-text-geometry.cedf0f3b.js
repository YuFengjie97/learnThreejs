import{ax as q,aA as B,aB as W,aC as A,G as R,ay as D,aa as N,q as V,r as I,S as U,C as J,P as $,W as K,A as Q,b as Z,V as X}from"./stats.module.c456474f.js";import{O as Y}from"./OrbitControls.ff4b382f.js";import{c as ee}from"./SceneUtils.60b9f24d.js";import{d as te,g as E,h as ne,c as ie,f as z,o as se}from"./index.b9f501be.js";class oe extends q{constructor(t,e={}){const i=e.font;if(i===void 0)super();else{const r=i.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const ae="/learning-threejs/assets/helvetiker_regular.typeface.d5c54676.json",re="/learning-threejs/assets/optimer_regular.typeface.17e5e14d.json",le="/learning-threejs/assets/gentilis_regular.typeface.7ed95f2f.json";class ce extends B{constructor(t){super(t)}load(t,e,i,r){const c=this,o=new W(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){const h=c.parse(JSON.parse(a));e&&e(h)},i,r)}parse(t){return new he(t)}}class he{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const i=[],r=de(t,e,this.data);for(let c=0,o=r.length;c<o;c++)i.push(...r[c].toShapes());return i}}function de(m,t,e){const i=Array.from(m),r=t/e.resolution,c=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[];let a=0,h=0;for(let d=0;d<i.length;d++){const u=i[d];if(u===`
`)a=0,h-=c;else{const g=ue(u,r,a,h,e);a+=g.offsetX,o.push(g.path)}}return o}function ue(m,t,e,i,r){const c=r.glyphs[m]||r.glyphs["?"];if(!c){console.error('THREE.Font: character "'+m+'" does not exists in font family '+r.familyName+".");return}const o=new A;let a,h,d,u,g,v,b,w;if(c.o){const l=c._cachedOutline||(c._cachedOutline=c.o.split(" "));for(let n=0,k=l.length;n<k;)switch(l[n++]){case"m":a=l[n++]*t+e,h=l[n++]*t+i,o.moveTo(a,h);break;case"l":a=l[n++]*t+e,h=l[n++]*t+i,o.lineTo(a,h);break;case"q":d=l[n++]*t+e,u=l[n++]*t+i,g=l[n++]*t+e,v=l[n++]*t+i,o.quadraticCurveTo(g,v,d,u);break;case"b":d=l[n++]*t+e,u=l[n++]*t+i,g=l[n++]*t+e,v=l[n++]*t+i,b=l[n++]*t+e,w=l[n++]*t+i,o.bezierCurveTo(g,v,b,w,d,u);break}}return{offsetX:c.ha*t,path:o}}const pe={class:"viewCon"},be=te({__name:"07-text-geometry",setup(m){const t=E(),e=E();let i=window.innerWidth,r=window.innerHeight,c,o,a,h,d,u,g,v,b,w,l;ne(async()=>{P(),b=await x(ae),w=await x(re),l=await x(le),f(),S(16777215,-30,30,-30),S(16777215,-30,30,30),k(),_()});const n={type:"gentilis",size:20,height:8,curveSegments:20,bevelEnabled:!0,bevelThickness:40,bevelSize:11,bevelOffset:1,bevelSegments:2};function k(){var p;let s=new R({autoPlace:!1,width:300});s.domElement.style.cssText="position: fixed; top: 0; right: 0;",(p=e.value)==null||p.appendChild(s.domElement),s.add(n,"type",["helvetiker","optimer","gentilis"]).onChange(()=>f()),s.add(n,"size",0,20,1).onChange(()=>f()),s.add(n,"height",0,20,1).onChange(()=>f()),s.add(n,"curveSegments",1,20,1).onChange(()=>f()),s.add(n,"bevelEnabled").onChange(()=>f()),s.add(n,"bevelThickness",0,40,1).onChange(()=>f()),s.add(n,"bevelSize",0,20,1).onChange(()=>f()),s.add(n,"bevelOffset",0,20,1).onChange(()=>f()),s.add(n,"bevelSegments",0,20,1).onChange(()=>f())}function x(s){return new Promise((p,y)=>{new ce().load(s,p,void 0,y)})}function f(){v&&a.remove(v);const{type:s,size:p,height:y,curveSegments:C,bevelEnabled:H,bevelThickness:O,bevelSize:G,bevelOffset:F,bevelSegments:L}=n;let T=new oe("hello,three.js",{font:s==="helvetiker"?b:s==="optimer"?w:l,size:p,height:y,curveSegments:C,bevelEnabled:H,bevelThickness:O,bevelSize:G,bevelOffset:F,bevelSegments:L});T.applyMatrix4(new D().makeTranslation(-3*p,0,0)),M(T),a.add(v)}function M(s){const p=new N({specular:16777215,color:15663103,shininess:100});v=ee(s,[p])}function S(s,p,y,C){u=new V(s),u.position.set(p,y,C),u.intensity=.7,u.target=a,g=new I(u,10),a.add(g),a.add(u)}function P(){a=new U,a.background=new J(4473924),h=new $(75,i/r,1,1e3),d=new K({canvas:t.value,antialias:!0}),d.setSize(i,r),window.addEventListener("resize",j),a.add(new Q(1e3)),c=Z(),e.value.append(c.dom),o=new Y(h,d.domElement),o.target=new X(0,0,0),o.object.position.set(0,50,100),o.update()}function _(){requestAnimationFrame(_),c.update(),d.render(a,h)}function j(){i=window.innerWidth,r=window.innerHeight,h.aspect=i/r,h.updateProjectionMatrix(),d.setSize(i,r)}return(s,p)=>(se(),ie("div",pe,[z("div",{class:"canvasCon",ref_key:"canvasCon",ref:e},[z("canvas",{class:"canvas",ref_key:"canvasDom",ref:t},null,512)],512)]))}});export{be as default};
